{"version":3,"sources":["../../src/pages/specials/specials.module.ts","../../src/pages/specials/specials.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SpecialsPage } from './specials';\n\n@NgModule({\n  declarations: [\n    SpecialsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SpecialsPage),\n  ],\n})\nexport class SpecialsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/specials/specials.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { AppServiceProvider } from '../../providers/app-service/app-service';\n/**\n * Generated class for the SpecialsPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage({\n  name : 'SpecialsPage',\n  segment : 'specials'\n})\n@Component({\n  selector: 'page-specials',\n  templateUrl: 'specials.html',\n})\nexport class SpecialsPage {\n\n  specials : any;\n  morning_special : Array<any> = [];\n  evening_special : Array<any> = [];\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public appservice : AppServiceProvider) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SpecialsPage');\n  }\n\n  ngOnInit(){\n  \tconsole.log(\"Inside ngOnInit SpecialsPage\");\n    this.appservice.handleClientLoad().then((res)=>{\n      this.callSpecialOrdersApi();\n    })\n    .catch((error)=>{\n      this.navCtrl.push('home');\n    })\n  \t\n  }\n\n  callSpecialOrdersApi(){\n    console.log(\"Inside special order api call function\");\n    let url = `https://content-script.googleapis.com/v1/scripts/${this.appservice.script_id}:run`;\n\n    let body = {\n      function : \"getSpecialsOrder\",\n      parameters : \"\"\n    }\n\n    this.appservice.request(url,'post',body,{},false,'promise').then((res)=>{\n        console.log(\"response from search api ==>\", res);\n        this.specials = res.response.result;\n        this.sortSpecials();\n    })\n    .catch((error)=>{\n        console.log(\"error from search api\", error);\n        \n    })\n  }\n\n  sortSpecials(){\n    let special_morning = this.specials[0].item;\n    for(let i=0;i<this.specials.length; i++){\n      if(this.specials[i].item == special_morning){\n        this.morning_special.push(this.specials[i])\n      }\n      else{\n        this.evening_special.push(this.specials[i]);\n      }\n    }\n  }\n\n  closeOrder(user, time, index){\n    if(user.order_status == 'open'){\n      console.log('Close oreder for ==>', user,time,index);\n      let body = {\n        function : 'close_order',\n        parameters : [user.email, user.item, user.date_of_order]\n      }\n\n      let url = `https://content-script.googleapis.com/v1/scripts/${this.appservice.script_id}:run`;\n      this.appservice.request(url,'post',body,{},false,'promise').then((res)=>{\n          console.log(\"response from search api ==>\", res);\n          if(res.response.result === true){\n            if(time == 'morning'){\n              this.morning_special[index].order_status = 'closed'\n            }\n            else{\n              this.evening_special[index].order_status = 'closed'\n            }\n          }\n          else{\n            let toast = this.appservice.presentToast(\"Something unexpected happened\",'error',5000,false,'bottom',''); \n          }\n          \n      })\n      .catch((error)=>{\n          console.log(\"error from search api\", error);\n      })\n    }    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/specials/specials.ts"],"sourceRoot":""}